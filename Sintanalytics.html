<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PUP San Juan - Student & Professor Portal</title>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
line-height: 1.6;
}

.hidden {
display: none !important;
}

/* Login & Signup Pages */
.auth-container {
min-height: 100vh;
background: linear-gradient(to bottom right, #7d1820, #9a2229, #600f14);
display: flex;
align-items: center;
justify-content: center;
padding: 16px;
}

.auth-card {
background: rgba(255, 255, 255, 0.95);
backdrop-filter: blur(10px);
border-radius: 8px;
box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
width: 100%;
max-width: 448px;
padding: 24px;
border: 2px solid #d4af37;
}

.auth-header {
text-align: center;
margin-bottom: 24px;
}

.auth-logo {
width: 64px;
height: 64px;
margin: 0 auto 12px;
object-fit: contain;
}

.auth-title {
color: #7d1820;
font-size: 24px;
font-weight: bold;
margin-bottom: 8px;
}

.auth-subtitle {
color: #6b7280;
font-size: 14px;
}

.form-group {
margin-bottom: 24px;
}

.form-label {
display: block;
color: #374151;
margin-bottom: 8px;
font-size: 14px;
}

.role-selector {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 12px;
margin-bottom: 24px;
}

.role-btn {
display: flex;
flex-direction: column;
align-items: center;
gap: 8px;
padding: 16px;
border-radius: 8px;
border: 2px solid #d1d5db;
background: #f9fafb;
color: #6b7280;
cursor: pointer;
transition: all 0.3s;
font-size: 14px;
}

.role-btn:hover {
border-color: #7d1820;
}

.role-btn.active {
background: linear-gradient(to right, #7d1820, #9a2229);
border-color: #d4af37;
color: white;
box-shadow: 0 10px 15px -3px rgba(125, 24, 32, 0.5);
}

.role-btn svg {
width: 32px;
height: 32px;
}

.input-group {
position: relative;
margin-bottom: 16px;
}

.input-icon {
position: absolute;
left: 12px;
top: 50%;
transform: translateY(-50%);
color: #7d1820;
width: 20px;
height: 20px;
}

.form-input {
width: 100%;
padding: 12px 12px 12px 40px;
background: white;
border: 2px solid #d1d5db;
color: #111827;
border-radius: 8px;
font-size: 14px;
outline: none;
transition: all 0.3s;
}

.form-input:focus {
border-color: #7d1820;
box-shadow: 0 0 0 3px rgba(125, 24, 32, 0.1);
}

.btn-primary {
width: 100%;
background: linear-gradient(to right, #7d1820, #9a2229);
color: white;
padding: 12px;
border-radius: 8px;
border: 1px solid #d4af37;
font-size: 14px;
cursor: pointer;
transition: all 0.3s;
box-shadow: 0 10px 15px -3px rgba(125, 24, 32, 0.5);
}

.btn-primary:hover {
background: linear-gradient(to right, #9a2229, #7d1820);
}

.auth-footer {
margin-top: 24px;
text-align: center;
color: #6b7280;
font-size: 14px;
}

.auth-link {
color: #7d1820;
cursor: pointer;
text-decoration: none;
}

.auth-link:hover {
color: #9a2229;
text-decoration: underline;
}

/* Dashboard Common Styles */
.dashboard {
height: 100vh;
display: flex;
flex-direction: column;
background: #f5f5f0;
}

.dashboard-header {
background: linear-gradient(to right, #7d1820, #9a2229);
border-bottom: 4px solid #d4af37;
padding: 16px 24px;
display: flex;
align-items: center;
justify-content: space-between;
box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.dashboard-title {
color: white;
font-size: 24px;
font-weight: bold;
}

.dashboard-user {
display: flex;
align-items: center;
gap: 16px;
}

.user-email {
color: white;
font-size: 14px;
}

.btn-logout {
display: flex;
align-items: center;
gap: 8px;
padding: 8px 16px;
background: #d4af37;
color: #7d1820;
border-radius: 8px;
border: none;
cursor: pointer;
box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
font-size: 14px;
transition: all 0.3s;
}

.btn-logout:hover {
background: #b8860b;
}

.dashboard-content {
flex: 1;
display: flex;
overflow: hidden;
}

/* Sidebar */
.sidebar {
width: 256px;
background: white;
border-right: 2px solid #d4af37;
display: flex;
flex-direction: column;
box-shadow: 4px 0 6px -1px rgba(0, 0, 0, 0.1);
}

.sidebar-header {
padding: 16px;
background: linear-gradient(to right, #7d1820, #9a2229);
border-bottom: 2px solid #d4af37;
}

.sidebar-title {
color: white;
font-size: 18px;
font-weight: bold;
}

.sidebar-nav {
flex: 1;
overflow: auto;
padding: 16px;
background: #f5f5f0;
}

.nav-items {
display: flex;
flex-direction: column;
gap: 8px;
}

.nav-btn {
width: 100%;
display: flex;
align-items: center;
gap: 12px;
padding: 12px 16px;
border-radius: 8px;
border: 2px solid #d1d5db;
background: white;
color: #374151;
cursor: pointer;
transition: all 0.3s;
font-size: 14px;
}

.nav-btn:hover {
background: #f3f4f6;
}

.nav-btn.active {
background: linear-gradient(to right, #7d1820, #9a2229);
border-color: #d4af37;
color: white;
box-shadow: 0 4px 6px -1px rgba(125, 24, 32, 0.5);
}

.nav-btn.add-btn {
background: linear-gradient(to right, #7d1820, #9a2229);
border-color: #d4af37;
color: white;
box-shadow: 0 4px 6px -1px rgba(125, 24, 32, 0.5);
}

.nav-btn.add-btn:hover {
background: linear-gradient(to right, #9a2229, #7d1820);
}

/* Main Content */
.main-content {
flex: 1;
overflow: auto;
padding: 24px;
}

.content-header {
margin-bottom: 24px;
}

.content-title {
color: #7d1820;
font-size: 28px;
font-weight: bold;
margin-bottom: 8px;
}

.content-subtitle {
color: #6b7280;
font-size: 14px;
}

.content-grid {
display: grid;
grid-template-columns: 1fr;
gap: 24px;
}

@media (min-width: 1024px) {
.content-grid {
grid-template-columns: 1fr 1fr;
}
}

/* Cards */
.card {
background: white;
border-radius: 8px;
padding: 24px;
border: 2px solid #d4af37;
box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.card-header {
display: flex;
align-items: center;
gap: 8px;
margin-bottom: 16px;
}

.card-title {
color: #7d1820;
font-size: 20px;
font-weight: bold;
}

/* Missing Activities */
.activities-list {
display: flex;
flex-direction: column;
gap: 12px;
max-height: 400px;
overflow-y: auto;
}

.activity-item {
background: #f5f5f0;
border: 2px solid #7d1820;
border-radius: 8px;
padding: 16px;
transition: all 0.3s;
}

.activity-item:hover {
border-color: #d4af37;
}

.activity-header {
display: flex;
justify-content: space-between;
margin-bottom: 8px;
}

.activity-title {
color: #111827;
font-weight: 600;
font-size: 14px;
}

.activity-subject {
color: #6b7280;
font-size: 12px;
}

.activity-badge {
padding: 4px 8px;
background: #7d1820;
color: white;
border-radius: 4px;
font-size: 12px;
white-space: nowrap;
}

.activity-footer {
display: flex;
align-items: center;
gap: 8px;
color: #6b7280;
font-size: 12px;
}

/* Excel-like Spreadsheet */
.spreadsheet-container {
background: white;
border-radius: 8px;
overflow: auto;
height: 100%;
border: 2px solid #e5e7eb;
}

.spreadsheet {
width: 100%;
border-collapse: collapse;
min-width: 800px;
}

.spreadsheet th {
background: #f9fafb;
color: #374151;
padding: 8px 12px;
text-align: center;
font-size: 13px;
border: 1px solid #d1d5db;
position: sticky;
top: 0;
z-index: 10;
font-weight: 600;
}

.spreadsheet th.row-header {
position: sticky;
left: 0;
z-index: 20;
min-width: 48px;
background: #f3f4f6;
}

.spreadsheet td.row-number {
background: #f3f4f6;
color: #6b7280;
text-align: center;
border: 1px solid #d1d5db;
position: sticky;
left: 0;
z-index: 5;
font-weight: 600;
}

.spreadsheet td {
padding: 0;
border: 1px solid #e5e7eb;
background: white;
}

.spreadsheet input {
width: 100%;
min-width: 120px;
height: 32px;
border: none;
background: transparent;
padding: 4px 8px;
font-size: 13px;
color: #111827;
outline: none;
}

.spreadsheet input:focus {
background: #f9fafb;
box-shadow: inset 0 0 0 2px #7d1820;
}

.spreadsheet input[readonly] {
background: #f9fafb;
color: #6b7280;
cursor: not-allowed;
}

.spreadsheet tr:hover td {
background: #fafafa;
}

.spreadsheet tr:hover td.row-number {
background: #f3f4f6;
}

/* Pie Chart */
.chart-container {
width: 100%;
height: 300px;
position: relative;
}

#pieCanvas {
max-width: 100%;
max-height: 100%;
}

.chart-legend {
margin-top: 16px;
display: grid;
grid-template-columns: 1fr 1fr;
gap: 8px;
}

.legend-item {
display: flex;
align-items: center;
gap: 8px;
font-size: 12px;
color: #6b7280;
}

.legend-color {
width: 16px;
height: 16px;
border-radius: 2px;
}

.chart-description {
margin-top: 16px;
text-align: center;
color: #6b7280;
font-size: 13px;
}

/* Stats Cards */
.stats-grid {
display: grid;
grid-template-columns: 1fr;
gap: 16px;
margin-top: 24px;
}

@media (min-width: 768px) {
.stats-grid {
grid-template-columns: repeat(3, 1fr);
}
}

.stat-card {
background: #f5f5f0;
padding: 12px;
border-radius: 8px;
border: 1px solid #d1d5db;
}

.stat-label {
color: #374151;
font-size: 13px;
margin-bottom: 4px;
}

.stat-value {
font-size: 18px;
font-weight: bold;
}

.stat-value.maroon {
color: #7d1820;
}

.stat-value.green {
color: #16a34a;
}

.stat-value.gold {
color: #d4af37;
}

/* Modal/Dialog */
.modal-overlay {
position: fixed;
inset: 0;
background: rgba(0, 0, 0, 0.8);
display: flex;
align-items: center;
justify-content: center;
z-index: 50;
padding: 16px;
}

.modal-content {
background: white;
border-radius: 8px;
box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
width: 100%;
max-width: 448px;
padding: 24px;
border: 2px solid #d4af37;
max-height: 90vh;
overflow-y: auto;
}

.modal-title {
color: #7d1820;
font-size: 20px;
font-weight: bold;
margin-bottom: 16px;
}

.modal-actions {
display: flex;
gap: 12px;
margin-top: 16px;
}

.btn-secondary {
flex: 1;
padding: 8px 16px;
background: white;
color: #374151;
border: 2px solid #d1d5db;
border-radius: 8px;
cursor: pointer;
font-size: 14px;
transition: all 0.3s;
}

.btn-secondary:hover {
background: #f9fafb;
}

.btn-modal-primary {
flex: 1;
padding: 8px 16px;
background: linear-gradient(to right, #7d1820, #9a2229);
color: white;
border: 1px solid #d4af37;
border-radius: 8px;
cursor: pointer;
font-size: 14px;
transition: all 0.3s;
box-shadow: 0 4px 6px -1px rgba(125, 24, 32, 0.5);
}

.btn-modal-primary:hover {
background: linear-gradient(to right, #9a2229, #7d1820);
}

/* Action Buttons Row */
.action-buttons {
display: flex;
gap: 12px;
padding: 16px;
background: white;
border-top: 2px solid #d4af37;
}

.action-btn {
flex: 1;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
padding: 12px 16px;
border-radius: 8px;
border: 1px solid;
cursor: pointer;
font-size: 14px;
transition: all 0.3s;
}

.action-btn.primary {
background: linear-gradient(to right, #7d1820, #9a2229);
border-color: #d4af37;
color: white;
box-shadow: 0 4px 6px -1px rgba(125, 24, 32, 0.5);
}

.action-btn.primary:hover {
background: linear-gradient(to right, #9a2229, #7d1820);
}

.action-btn.secondary {
background: linear-gradient(to right, #d4af37, #b8860b);
border-color: #7d1820;
color: #7d1820;
box-shadow: 0 4px 6px -1px rgba(212, 175, 55, 0.5);
}

.action-btn.secondary:hover {
background: linear-gradient(to right, #b8860b, #d4af37);
}

/* Professor Dashboard Specific */
.professor-layout {
display: flex;
flex: 1;
overflow: hidden;
}

.spreadsheet-section {
flex: 1;
display: flex;
flex-direction: column;
min-width: 0;
}

.section-header {
background: linear-gradient(to right, #7d1820, #9a2229);
border-bottom: 2px solid #d4af37;
padding: 12px 16px;
}

.section-title {
color: white;
font-size: 18px;
font-weight: bold;
}

.right-panel {
width: 384px;
background: #f5f5f0;
border-left: 2px solid #d4af37;
padding: 24px;
overflow: auto;
box-shadow: -4px 0 6px -1px rgba(0, 0, 0, 0.1);
}

.panel-cards {
display: flex;
flex-direction: column;
gap: 16px;
}

.assignments-list {
display: flex;
flex-direction: column;
gap: 8px;
}

.assignment-item {
display: flex;
align-items: center;
gap: 8px;
color: #374151;
font-size: 14px;
}

.assignment-dot {
width: 8px;
height: 8px;
border-radius: 50%;
}

.resources-buttons {
margin-top: 16px;
display: flex;
flex-direction: column;
gap: 8px;
}

.resource-btn {
padding: 8px 16px;
border-radius: 8px;
border: none;
cursor: pointer;
font-size: 14px;
transition: all 0.3s;
}

.resource-btn.primary {
background: linear-gradient(to right, #7d1820, #9a2229);
color: white;
border: 1px solid #d4af37;
box-shadow: 0 4px 6px -1px rgba(125, 24, 32, 0.5);
}

.resource-btn.primary:hover {
background: linear-gradient(to right, #9a2229, #7d1820);
}

.resource-btn.outline {
background: white;
color: #7d1820;
border: 2px solid #7d1820;
}

.resource-btn.outline:hover {
background: #f9fafb;
}

/* Grade Result Display */
.grade-result {
background: linear-gradient(to right, #7d1820, #9a2229);
border-radius: 8px;
padding: 16px;
border: 2px solid #d4af37;
display: flex;
justify-content: space-between;
align-items: center;
margin-top: 16px;
}

.grade-result-label {
color: white;
font-size: 14px;
}

.grade-result-value {
color: #d4af37;
font-size: 28px;
font-weight: bold;
}

/* Responsive */
@media (max-width: 1024px) {
.sidebar {
width: 100%;
max-height: 200px;
border-right: none;
border-bottom: 2px solid #d4af37;
}

.dashboard-content {
flex-direction: column;
}

.right-panel {
width: 100%;
border-left: none;
border-top: 2px solid #d4af37;
}

.professor-layout {
flex-direction: column;
}
}

@media (max-width: 640px) {
.auth-card {
padding: 16px;
}

.auth-logo {
width: 48px;
height: 48px;
}

.auth-title {
font-size: 20px;
}

.dashboard-header {
padding: 12px 16px;
}

.dashboard-title {
font-size: 18px;
}

.user-email {
display: none;
}

.btn-logout span {
display: none;
}

.main-content {
padding: 16px;
}

.content-title {
font-size: 20px;
}

.action-buttons {
flex-direction: column;
}
}

.icon {
width: 20px;
height: 20px;
display: inline-block;
vertical-align: middle;
}

.icon-lg {
width: 32px;
height: 32px;
}
</style>
</head>
<body>
<!-- Login Page -->
<div id="loginPage" class="auth-container">
<div class="auth-card">
<div class="auth-header">
<img src="https://upload.wikimedia.org/wikipedia/en/thumb/c/c7/Polytechnic_University_of_the_Philippines_San_Juan_Logo.svg/1200px-Polytechnic_University_of_the_Philippines_San_Juan_Logo.svg.png" alt="PUP San Juan Logo" class="auth-logo">
<h1 class="auth-title">PUP San Juan</h1>
<p class="auth-subtitle">Welcome Back</p>
</div>

<form id="loginForm">
<div class="form-group">
<label class="form-label">I am a:</label>
<div class="role-selector">
<button type="button" class="role-btn active" data-role="student">
<svg class="icon-lg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z"/>
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/>
</svg>
<span>Student</span>
</button>
<button type="button" class="role-btn" data-role="professor">
<svg class="icon-lg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
</svg>
<span>Professor</span>
</button>
</div>
</div>

<div class="input-group">
<svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
</svg>
<input type="email" class="form-input" placeholder="you@example.com" id="loginEmail" required>
</div>

<div class="input-group">
<svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
</svg>
<input type="password" class="form-input" placeholder="••••••••" id="loginPassword" required>
</div>

<button type="submit" class="btn-primary">Sign In</button>
</form>

<div class="auth-footer">
<p>Don't have an account? <a class="auth-link" id="switchToSignup">Sign up</a></p>
</div>
</div>
</div>

<!-- Signup Page -->
<div id="signupPage" class="auth-container hidden">
<div class="auth-card">
<div class="auth-header">
<img src="https://upload.wikimedia.org/wikipedia/en/thumb/c/c7/Polytechnic_University_of_the_Philippines_San_Juan_Logo.svg/1200px-Polytechnic_University_of_the_Philippines_San_Juan_Logo.svg.png" alt="PUP San Juan Logo" class="auth-logo">
<h1 class="auth-title">Create Account</h1>
<p class="auth-subtitle">Sign up to get started</p>
</div>

<form id="signupForm">
<div class="form-group">
<label class="form-label">I am a:</label>
<div class="role-selector">
<button type="button" class="role-btn active" data-role="student">
<svg class="icon-lg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z"/>
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/>
</svg>
<span>Student</span>
</button>
<button type="button" class="role-btn" data-role="professor">
<svg class="icon-lg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
</svg>
<span>Professor</span>
</button>
</div>
</div>

<div class="input-group">
<svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
</svg>
<input type="text" class="form-input" placeholder="John Doe" id="signupName" required>
</div>

<div class="input-group">
<svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
</svg>
<input type="email" class="form-input" placeholder="you@example.com" id="signupEmail" required>
</div>

<div class="input-group">
<svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
</svg>
<input type="password" class="form-input" placeholder="••••••••" id="signupPassword" required>
</div>

<div class="input-group">
<svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
</svg>
<input type="password" class="form-input" placeholder="••••••••" id="signupConfirmPassword" required>
</div>

<button type="submit" class="btn-primary">Create Account</button>
</form>

<div class="auth-footer">
<p>Already have an account? <a class="auth-link" id="switchToLogin">Sign in</a></p>
</div>
</div>
</div>

<!-- Student Dashboard -->
<div id="studentDashboard" class="dashboard hidden">
<header class="dashboard-header">
<h1 class="dashboard-title">Student Dashboard</h1>
<div class="dashboard-user">
<span class="user-email" id="studentEmail">student@pup.edu.ph</span>
<button class="btn-logout" id="studentLogout">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
</svg>
<span>Logout</span>
</button>
</div>
</header>

<div class="dashboard-content">
<aside class="sidebar">
<div class="sidebar-header">
<h2 class="sidebar-title">My Subjects</h2>
</div>
<nav class="sidebar-nav">
<div class="nav-items" id="studentSubjects">
<button class="nav-btn add-btn" id="enrollSubjectBtn">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
</svg>
<span>Enroll Subject</span>
</button>
<button class="nav-btn active" data-subject="All Subjects">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
</svg>
<span>All Subjects</span>
</button>
<button class="nav-btn" data-subject="Mathematics">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
</svg>
<span>Mathematics</span>
</button>
<button class="nav-btn" data-subject="Science">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
</svg>
<span>Science</span>
</button>
<button class="nav-btn" data-subject="Statistics">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
</svg>
<span>Statistics</span>
</button>
</div>
</nav>
</aside>

<main class="main-content">
<div class="content-header">
<h2 class="content-title" id="studentActiveSubject">All Subjects</h2>
<p class="content-subtitle">Track your progress and missing activities</p>
</div>

<div class="content-grid">
<div class="card">
<div class="card-header">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
</svg>
<h3 class="card-title">Missing Activities</h3>
</div>
<div class="activities-list" id="studentActivities">
<div class="activity-item">
<div class="activity-header">
<div>
<div class="activity-title">Chapter 5 Homework</div>
<div class="activity-subject">Mathematics</div>
</div>
<span class="activity-badge">Assignment</span>
</div>
<div class="activity-footer">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
</svg>
<span>Due: 2025-11-28</span>
</div>
</div>
<div class="activity-item">
<div class="activity-header">
<div>
<div class="activity-title">Lab Report #3</div>
<div class="activity-subject">Science</div>
</div>
<span class="activity-badge">Lab</span>
</div>
<div class="activity-footer">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
</svg>
<span>Due: 2025-11-29</span>
</div>
</div>
<div class="activity-item">
<div class="activity-header">
<div>
<div class="activity-title">Quiz 4</div>
<div class="activity-subject">Mathematics</div>
</div>
<span class="activity-badge">Quiz</span>
</div>
<div class="activity-footer">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
</svg>
<span>Due: 2025-11-30</span>
</div>
</div>
<div class="activity-item">
<div class="activity-header">
<div>
<div class="activity-title">Data Analysis Project</div>
<div class="activity-subject">Statistics</div>
</div>
<span class="activity-badge">Project</span>
</div>
<div class="activity-footer">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
</svg>
<span>Due: 2025-12-01</span>
</div>
</div>
<div class="activity-item">
<div class="activity-header">
<div>
<div class="activity-title">Reading Assignment</div>
<div class="activity-subject">Science</div>
</div>
<span class="activity-badge">Reading</span>
</div>
<div class="activity-footer">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
</svg>
<span>Due: 2025-11-27</span>
</div>
</div>
</div>
</div>

<div class="card">
<h3 class="card-title">Predictive Analysis</h3>
<div class="chart-container">
<canvas id="studentPieChart"></canvas>
</div>
<div class="chart-legend">
<div class="legend-item">
<div class="legend-color" style="background: #ef4444;"></div>
<span>High Pass Probability: 35%</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background: #dc2626;"></div>
<span>Moderate Pass Probability: 30%</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background: #991b1b;"></div>
<span>Low Pass Probability: 20%</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background: #7f1d1d;"></div>
<span>At Risk: 15%</span>
</div>
</div>
<div class="chart-description">
Probability prediction based on current performance trends
</div>
<div class="stats-grid">
<div class="stat-card">
<div class="stat-label">Pass Probability</div>
<div class="stat-value maroon">85%</div>
</div>
<div class="stat-card">
<div class="stat-label">Success Prediction</div>
<div class="stat-value green">High</div>
</div>
<div class="stat-card">
<div class="stat-label">Completion Rate</div>
<div class="stat-value gold">78%</div>
</div>
</div>
</div>
</div>

<div class="stats-grid" style="margin-top: 24px;">
<div class="card">
<h4 class="card-title" style="font-size: 16px; margin-bottom: 8px;">Upcoming Deadlines</h4>
<p style="color: #374151; font-size: 14px;">3 assignments due this week</p>
</div>
<div class="card">
<h4 class="card-title" style="font-size: 16px; margin-bottom: 8px;">Study Time</h4>
<p style="color: #374151; font-size: 14px;">12 hours this week</p>
</div>
<div class="card">
<h4 class="card-title" style="font-size: 16px; margin-bottom: 8px;">Active Subjects</h4>
<p style="color: #374151; font-size: 14px;">3 enrolled</p>
</div>
</div>
</main>
</div>
</div>

<!-- Professor Dashboard -->
<div id="professorDashboard" class="dashboard hidden">
<header class="dashboard-header">
<h1 class="dashboard-title">Professor Dashboard</h1>
<div class="dashboard-user">
<span class="user-email" id="professorEmail">professor@pup.edu.ph</span>
<button class="btn-logout" id="professorLogout">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
</svg>
<span>Logout</span>
</button>
</div>
</header>

<div class="dashboard-content">
<aside class="sidebar">
<div class="sidebar-header">
<h2 class="sidebar-title">Subjects</h2>
</div>
<nav class="sidebar-nav">
<div class="nav-items" id="professorSubjects">
<button class="nav-btn add-btn" id="addSubjectBtn">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
</svg>
<span>Add Subject</span>
</button>
<button class="nav-btn active" data-subject="Mathematics">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
</svg>
<span>Mathematics</span>
</button>
<button class="nav-btn" data-subject="Science">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
</svg>
<span>Science</span>
</button>
<button class="nav-btn" data-subject="Statistics">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
</svg>
<span>Statistics</span>
</button>
</div>
</nav>
</aside>

<div class="professor-layout">
<div class="spreadsheet-section">
<div class="section-header">
<h2 class="section-title" id="professorActiveSubject">Data Sheet - Mathematics</h2>
</div>
<div class="spreadsheet-container" style="flex: 1; overflow: auto;">
<table class="spreadsheet" id="professorSpreadsheet">
<thead>
<tr>
<th class="row-header">#</th>
<th>ID Number</th>
<th>Name</th>
<th>Quiz</th>
<th>Activity</th>
<th>Exam</th>
<th>Midterm</th>
<th>Final</th>
<th>Final Grade</th>
</tr>
</thead>
<tbody id="spreadsheetBody">
<!-- Rows will be generated by JavaScript -->
</tbody>
</table>
</div>
<div class="action-buttons">
<button class="action-btn primary" id="computeGradeBtn">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
</svg>
<span>Compute Final Grade</span>
</button>
<button class="action-btn secondary" id="refreshAnalysisBtn">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
</svg>
<span>Refresh Analysis</span>
</button>
</div>
</div>

<aside class="right-panel">
<div class="content-header">
<h2 class="content-title" id="professorSubjectName">Mathematics</h2>
<p class="content-subtitle">Subject overview and analysis</p>
</div>

<div class="panel-cards">
<div class="card">
<h3 class="card-title">Predictive Analysis</h3>
<div class="chart-container">
<canvas id="professorPieChart"></canvas>
</div>
<div class="chart-legend" id="professorLegend">
<div class="legend-item">
<div class="legend-color" style="background: #ef4444;"></div>
<span>High Pass Probability: 35%</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background: #dc2626;"></div>
<span>Moderate Pass Probability: 30%</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background: #991b1b;"></div>
<span>Low Pass Probability: 20%</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background: #7f1d1d;"></div>
<span>At Risk: 15%</span>
</div>
</div>
<div class="chart-description">
Probability prediction based on current performance trends
</div>
</div>

<div class="card">
<h3 class="card-title" style="font-size: 16px; margin-bottom: 12px;">Assignments</h3>
<div class="assignments-list">
<div class="assignment-item">
<div class="assignment-dot" style="background: #10b981;"></div>
<span>Chapter 5 Exercises</span>
</div>
<div class="assignment-item">
<div class="assignment-dot" style="background: #d4af37;"></div>
<span>Final Project</span>
</div>
<div class="assignment-item">
<div class="assignment-dot" style="background: #7d1820;"></div>
<span>Quiz Preparation</span>
</div>
</div>
</div>

<div class="card">
<h3 class="card-title" style="font-size: 16px; margin-bottom: 8px;">Resources</h3>
<p style="color: #6b7280; font-size: 14px; margin-bottom: 16px;">Access study materials and notes</p>
<div class="resources-buttons">
<button class="resource-btn primary">View Materials</button>
<button class="resource-btn outline">Download Notes</button>
</div>
</div>
</div>
</aside>
</div>
</div>
</div>

<!-- Modals -->
<!-- Enroll Subject Modal -->
<div id="enrollSubjectModal" class="modal-overlay hidden">
<div class="modal-content">
<h2 class="modal-title">Enroll in Subject</h2>
<input type="text" class="form-input" placeholder="Enter subject name" id="enrollSubjectInput" style="padding-left: 12px;">
<div class="modal-actions">
<button class="btn-modal-primary" id="confirmEnroll">Enroll</button>
<button class="btn-secondary" id="cancelEnroll">Cancel</button>
</div>
</div>
</div>

<!-- Add Subject Modal -->
<div id="addSubjectModal" class="modal-overlay hidden">
<div class="modal-content">
<h2 class="modal-title">Add New Subject</h2>
<input type="text" class="form-input" placeholder="Enter subject name" id="addSubjectInput" style="padding-left: 12px;">
<div class="modal-actions">
<button class="btn-modal-primary" id="confirmAdd">Add</button>
<button class="btn-secondary" id="cancelAdd">Cancel</button>
</div>
</div>
</div>

<!-- Compute Grade Modal -->
<div id="computeGradeModal" class="modal-overlay hidden">
<div class="modal-content">
<h2 class="modal-title">Compute Final Grade</h2>
<div class="form-group">
<label class="form-label">Student:</label>
<select class="form-input" id="studentSelect" style="padding-left: 12px;">
<option value="">Select a student</option>
<option value="John Doe">John Doe</option>
<option value="Jane Smith">Jane Smith</option>
<option value="Michael Johnson">Michael Johnson</option>
<option value="Emily Davis">Emily Davis</option>
<option value="Robert Brown">Robert Brown</option>
</select>
</div>
<div class="form-group">
<label class="form-label">Quizzes (20%):</label>
<input type="number" class="form-input" placeholder="Enter quiz grade" id="quizzesInput" style="padding-left: 12px;">
</div>
<div class="form-group">
<label class="form-label">Assignments (20%):</label>
<input type="number" class="form-input" placeholder="Enter assignment grade" id="assignmentsInput" style="padding-left: 12px;">
</div>
<div class="form-group">
<label class="form-label">Midterm (30%):</label>
<input type="number" class="form-input" placeholder="Enter midterm grade" id="midtermInput" style="padding-left: 12px;">
</div>
<div class="form-group">
<label class="form-label">Finals (30%):</label>
<input type="number" class="form-input" placeholder="Enter finals grade" id="finalsInput" style="padding-left: 12px;">
</div>
<div id="gradeResult" class="hidden">
<div class="grade-result">
<span class="grade-result-label">Final Grade:</span>
<span class="grade-result-value" id="finalGradeValue">0</span>
</div>
</div>
<div class="modal-actions">
<button class="btn-modal-primary" id="computeBtn">Compute</button>
<button class="btn-secondary" id="cancelCompute">Cancel</button>
</div>
</div>
</div>

<script>
// State management
let currentUser = {
email: '',
role: ''
};
let loginRole = 'student';
let signupRole = 'student';
let studentActiveSubject = 'All Subjects';
let professorActiveSubject = 'Mathematics';
let professorChartData = [
{ name: 'High Pass Probability', value: 35, color: '#ef4444' },
{ name: 'Moderate Pass Probability', value: 30, color: '#dc2626' },
{ name: 'Low Pass Probability', value: 20, color: '#991b1b' },
{ name: 'At Risk', value: 15, color: '#7f1d1d' }
];

// Sample student data
const sampleStudents = [
{ id: '2021-00001-MN-0', name: 'John Doe', quiz: '85', activity: '90', exam: '88', midterm: '87', final: '89' },
{ id: '2021-00002-MN-0', name: 'Jane Smith', quiz: '92', activity: '88', exam: '91', midterm: '90', final: '93' },
{ id: '2021-00003-MN-0', name: 'Michael Johnson', quiz: '78', activity: '82', exam: '80', midterm: '79', final: '81' },
{ id: '2021-00004-MN-0', name: 'Emily Davis', quiz: '95', activity: '94', exam: '96', midterm: '95', final: '97' },
{ id: '2021-00005-MN-0', name: 'Robert Brown', quiz: '88', activity: '86', exam: '87', midterm: '88', final: '90' },
{ id: '2021-00006-MN-0', name: 'Maria Garcia', quiz: '91', activity: '89', exam: '90', midterm: '92', final: '91' },
{ id: '2021-00007-MN-0', name: 'David Wilson', quiz: '76', activity: '78', exam: '75', midterm: '77', final: '79' },
{ id: '2021-00008-MN-0', name: 'Sarah Martinez', quiz: '89', activity: '91', exam: '88', midterm: '90', final: '92' },
{ id: '2021-00009-MN-0', name: 'James Anderson', quiz: '84', activity: '83', exam: '85', midterm: '86', final: '87' },
{ id: '2021-00010-MN-0', name: 'Lisa Taylor', quiz: '93', activity: '95', exam: '94', midterm: '93', final: '96' }
];

// Calculate average for a row
function calculateAverage(quiz, activity, exam, midterm, final) {
const nums = [quiz, activity, exam, midterm, final]
.map(v => parseFloat(v))
.filter(v => !isNaN(v));

if (nums.length === 0) return '';

const avg = nums.reduce((sum, n) => sum + n, 0) / nums.length;
return avg.toFixed(2);
}

// Initialize Spreadsheet
function initSpreadsheet() {
const tbody = document.getElementById('spreadsheetBody');
tbody.innerHTML = '';

for (let i = 0; i < 20; i++) {
const row = document.createElement('tr');

// Row number
const rowNumCell = document.createElement('td');
rowNumCell.className = 'row-number';
rowNumCell.textContent = i + 1;
row.appendChild(rowNumCell);

// Get student data if available
const student = i < sampleStudents.length ? sampleStudents[i] : null;

// Data cells (8 columns: ID, Name, Quiz, Activity, Exam, Midterm, Final, Final Grade)
const values = student ? [
student.id,
student.name,
student.quiz,
student.activity,
student.exam,
student.midterm,
student.final,
calculateAverage(student.quiz, student.activity, student.exam, student.midterm, student.final)
] : ['', '', '', '', '', '', '', ''];

for (let j = 0; j < 8; j++) {
const cell = document.createElement('td');
const input = document.createElement('input');
input.type = 'text';
input.value = values[j];

// Make Final Grade column readonly and add listeners to grade columns
if (j === 7) {
input.readOnly = true;
input.className = 'final-grade-cell';
} else if (j >= 2 && j <= 6) {
// Add input listener to grade columns (Quiz, Activity, Exam, Midterm, Final)
input.addEventListener('input', function() {
updateRowAverage(row);
});
}

cell.appendChild(input);
row.appendChild(cell);
}

tbody.appendChild(row);
}
}

// Update average for a specific row
function updateRowAverage(row) {
const inputs = row.querySelectorAll('input');
// inputs[2-6] are Quiz, Activity, Exam, Midterm, Final
// inputs[7] is Final Grade
const quiz = inputs[2].value;
const activity = inputs[3].value;
const exam = inputs[4].value;
const midterm = inputs[5].value;
const final = inputs[6].value;

const average = calculateAverage(quiz, activity, exam, midterm, final);
inputs[7].value = average;
}

// Draw Pie Chart
function drawPieChart(canvasId, data) {
const canvas = document.getElementById(canvasId);
if (!canvas) return;

const ctx = canvas.getContext('2d');
const centerX = canvas.width / 2;
const centerY = canvas.height / 2;
const radius = Math.min(centerX, centerY) - 20;

// Clear canvas
ctx.clearRect(0, 0, canvas.width, canvas.height);

// Calculate total
const total = data.reduce((sum, item) => sum + item.value, 0);

let currentAngle = -Math.PI / 2; // Start from top

data.forEach((item, index) => {
const sliceAngle = (item.value / total) * 2 * Math.PI;

// Draw slice
ctx.beginPath();
ctx.moveTo(centerX, centerY);
ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
ctx.closePath();
ctx.fillStyle = item.color;
ctx.fill();

// Draw label
const labelAngle = currentAngle + sliceAngle / 2;
const labelX = centerX + (radius * 0.7) * Math.cos(labelAngle);
const labelY = centerY + (radius * 0.7) * Math.sin(labelAngle);

ctx.fillStyle = '#ffffff';
ctx.font = 'bold 12px Arial';
ctx.textAlign = 'center';
ctx.textBaseline = 'middle';
const percentage = Math.round((item.value / total) * 100);
ctx.fillText(`${percentage}%`, labelX, labelY);

currentAngle += sliceAngle;
});
}

// Initialize pie charts
function initCharts() {
// Set canvas sizes
const studentCanvas = document.getElementById('studentPieChart');
const professorCanvas = document.getElementById('professorPieChart');

if (studentCanvas) {
studentCanvas.width = 300;
studentCanvas.height = 300;
drawPieChart('studentPieChart', professorChartData);
}

if (professorCanvas) {
professorCanvas.width = 300;
professorCanvas.height = 300;
drawPieChart('professorPieChart', professorChartData);
}
}

// Page Navigation
function showPage(pageId) {
const pages = ['loginPage', 'signupPage', 'studentDashboard', 'professorDashboard'];
pages.forEach(id => {
document.getElementById(id).classList.add('hidden');
});
document.getElementById(pageId).classList.remove('hidden');

// Initialize charts when showing dashboards
if (pageId === 'studentDashboard' || pageId === 'professorDashboard') {
setTimeout(() => {
initCharts();
if (pageId === 'professorDashboard') {
initSpreadsheet();
}
}, 100);
}
}

// Role Selection for Login
document.querySelectorAll('#loginPage .role-btn').forEach(btn => {
btn.addEventListener('click', () => {
document.querySelectorAll('#loginPage .role-btn').forEach(b => b.classList.remove('active'));
btn.classList.add('active');
loginRole = btn.dataset.role;
});
});

// Role Selection for Signup
document.querySelectorAll('#signupPage .role-btn').forEach(btn => {
btn.addEventListener('click', () => {
document.querySelectorAll('#signupPage .role-btn').forEach(b => b.classList.remove('active'));
btn.classList.add('active');
signupRole = btn.dataset.role;
});
});

// Switch to Signup
document.getElementById('switchToSignup').addEventListener('click', () => {
showPage('signupPage');
});

// Switch to Login
document.getElementById('switchToLogin').addEventListener('click', () => {
showPage('loginPage');
});

// Login Form
document.getElementById('loginForm').addEventListener('submit', (e) => {
e.preventDefault();
const email = document.getElementById('loginEmail').value;
currentUser.email = email;
currentUser.role = loginRole;

if (loginRole === 'student') {
document.getElementById('studentEmail').textContent = email;
showPage('studentDashboard');
} else {
document.getElementById('professorEmail').textContent = email;
showPage('professorDashboard');
}
});

// Signup Form
document.getElementById('signupForm').addEventListener('submit', (e) => {
e.preventDefault();
const email = document.getElementById('signupEmail').value;
const password = document.getElementById('signupPassword').value;
const confirmPassword = document.getElementById('signupConfirmPassword').value;

if (password !== confirmPassword) {
alert('Passwords do not match!');
return;
}

currentUser.email = email;
currentUser.role = signupRole;

if (signupRole === 'student') {
document.getElementById('studentEmail').textContent = email;
showPage('studentDashboard');
} else {
document.getElementById('professorEmail').textContent = email;
showPage('professorDashboard');
}
});

// Logout handlers
document.getElementById('studentLogout').addEventListener('click', () => {
currentUser = { email: '', role: '' };
showPage('loginPage');
});

document.getElementById('professorLogout').addEventListener('click', () => {
currentUser = { email: '', role: '' };
showPage('loginPage');
});

// Student Subject Navigation
document.querySelectorAll('#studentSubjects .nav-btn:not(.add-btn)').forEach(btn => {
btn.addEventListener('click', () => {
document.querySelectorAll('#studentSubjects .nav-btn:not(.add-btn)').forEach(b => b.classList.remove('active'));
btn.classList.add('active');
studentActiveSubject = btn.dataset.subject;
document.getElementById('studentActiveSubject').textContent = studentActiveSubject;
});
});

// Professor Subject Navigation
document.querySelectorAll('#professorSubjects .nav-btn:not(.add-btn)').forEach(btn => {
btn.addEventListener('click', () => {
document.querySelectorAll('#professorSubjects .nav-btn:not(.add-btn)').forEach(b => b.classList.remove('active'));
btn.classList.add('active');
professorActiveSubject = btn.dataset.subject;
document.getElementById('professorActiveSubject').textContent = 'Data Sheet - ' + professorActiveSubject;
document.getElementById('professorSubjectName').textContent = professorActiveSubject;
});
});

// Enroll Subject Modal
document.getElementById('enrollSubjectBtn').addEventListener('click', () => {
document.getElementById('enrollSubjectModal').classList.remove('hidden');
});

document.getElementById('cancelEnroll').addEventListener('click', () => {
document.getElementById('enrollSubjectModal').classList.add('hidden');
document.getElementById('enrollSubjectInput').value = '';
});

document.getElementById('confirmEnroll').addEventListener('click', () => {
const subjectName = document.getElementById('enrollSubjectInput').value.trim();
if (subjectName) {
alert('Enrolled in: ' + subjectName);
document.getElementById('enrollSubjectModal').classList.add('hidden');
document.getElementById('enrollSubjectInput').value = '';
}
});

// Add Subject Modal
document.getElementById('addSubjectBtn').addEventListener('click', () => {
document.getElementById('addSubjectModal').classList.remove('hidden');
});

document.getElementById('cancelAdd').addEventListener('click', () => {
document.getElementById('addSubjectModal').classList.add('hidden');
document.getElementById('addSubjectInput').value = '';
});

document.getElementById('confirmAdd').addEventListener('click', () => {
const subjectName = document.getElementById('addSubjectInput').value.trim();
if (subjectName) {
alert('Added subject: ' + subjectName);
document.getElementById('addSubjectModal').classList.add('hidden');
document.getElementById('addSubjectInput').value = '';
}
});

// Compute Grade Modal
document.getElementById('computeGradeBtn').addEventListener('click', () => {
document.getElementById('computeGradeModal').classList.remove('hidden');
});

document.getElementById('cancelCompute').addEventListener('click', () => {
document.getElementById('computeGradeModal').classList.add('hidden');
document.getElementById('gradeResult').classList.add('hidden');
document.getElementById('studentSelect').value = '';
document.getElementById('quizzesInput').value = '';
document.getElementById('assignmentsInput').value = '';
document.getElementById('midtermInput').value = '';
document.getElementById('finalsInput').value = '';
});

document.getElementById('computeBtn').addEventListener('click', () => {
const quizzes = parseFloat(document.getElementById('quizzesInput').value) || 0;
const assignments = parseFloat(document.getElementById('assignmentsInput').value) || 0;
const midterm = parseFloat(document.getElementById('midtermInput').value) || 0;
const finals = parseFloat(document.getElementById('finalsInput').value) || 0;

const finalGrade = (quizzes * 0.2) + (assignments * 0.2) + (midterm * 0.3) + (finals * 0.3);
const roundedGrade = Math.round(finalGrade * 100) / 100;

document.getElementById('finalGradeValue').textContent = roundedGrade;
document.getElementById('gradeResult').classList.remove('hidden');
});

// Refresh Predictive Analysis
document.getElementById('refreshAnalysisBtn').addEventListener('click', () => {
const total = 100;
const highPass = Math.floor(Math.random() * 40) + 20;
const moderatePass = Math.floor(Math.random() * 30) + 15;
const lowPass = Math.floor(Math.random() * 25) + 10;
const atRisk = total - highPass - moderatePass - lowPass;

professorChartData = [
{ name: 'High Pass Probability', value: highPass, color: '#ef4444' },
{ name: 'Moderate Pass Probability', value: moderatePass, color: '#dc2626' },
{ name: 'Low Pass Probability', value: lowPass, color: '#991b1b' },
{ name: 'At Risk', value: Math.max(atRisk, 5), color: '#7f1d1d' }
];

drawPieChart('professorPieChart', professorChartData);

// Update legend
const legendHTML = professorChartData.map(item => `
<div class="legend-item">
<div class="legend-color" style="background: ${item.color};"></div>
<span>${item.name}: ${item.value}%</span>
</div>
`).join('');
document.getElementById('professorLegend').innerHTML = legendHTML;

alert('Probability prediction refreshed with new data!');
});

// Initialize on page load
window.addEventListener('load', () => {
showPage('loginPage');
});
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PUP San Juan - Student & Professor Portal</title>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
line-height: 1.6;
}

.hidden {
display: none !important;
}

/* Login & Signup Pages */
.auth-container {
min-height: 100vh;
background: linear-gradient(to bottom right, #7d1820, #9a2229, #600f14);
display: flex;
align-items: center;
justify-content: center;
padding: 16px;
}

.auth-card {
background: rgba(255, 255, 255, 0.95);
backdrop-filter: blur(10px);
border-radius: 8px;
box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
width: 100%;
max-width: 448px;
padding: 24px;
border: 2px solid #d4af37;
}

.auth-header {
text-align: center;
margin-bottom: 24px;
}

.auth-logo {
width: 64px;
height: 64px;
margin: 0 auto 12px;
object-fit: contain;
}

.auth-title {
color: #7d1820;
font-size: 24px;
font-weight: bold;
margin-bottom: 8px;
}

.auth-subtitle {
color: #6b7280;
font-size: 14px;
}

.form-group {
margin-bottom: 24px;
}

.form-label {
display: block;
color: #374151;
margin-bottom: 8px;
font-size: 14px;
}

.role-selector {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 12px;
margin-bottom: 24px;
}

.role-btn {
display: flex;
flex-direction: column;
align-items: center;
gap: 8px;
padding: 16px;
border-radius: 8px;
border: 2px solid #d1d5db;
background: #f9fafb;
color: #6b7280;
cursor: pointer;
transition: all 0.3s;
font-size: 14px;
}

.role-btn:hover {
border-color: #7d1820;
}

.role-btn.active {
background: linear-gradient(to right, #7d1820, #9a2229);
border-color: #d4af37;
color: white;
box-shadow: 0 10px 15px -3px rgba(125, 24, 32, 0.5);
}

.role-btn svg {
width: 32px;
height: 32px;
}

.input-group {
position: relative;
margin-bottom: 16px;
}

.input-icon {
position: absolute;
left: 12px;
top: 50%;
transform: translateY(-50%);
color: #7d1820;
width: 20px;
height: 20px;
}

.form-input {
width: 100%;
padding: 12px 12px 12px 40px;
background: white;
border: 2px solid #d1d5db;
color: #111827;
border-radius: 8px;
font-size: 14px;
outline: none;
transition: all 0.3s;
}

.form-input:focus {
border-color: #7d1820;
box-shadow: 0 0 0 3px rgba(125, 24, 32, 0.1);
}

.btn-primary {
width: 100%;
background: linear-gradient(to right, #7d1820, #9a2229);
color: white;
padding: 12px;
border-radius: 8px;
border: 1px solid #d4af37;
font-size: 14px;
cursor: pointer;
transition: all 0.3s;
box-shadow: 0 10px 15px -3px rgba(125, 24, 32, 0.5);
}

.btn-primary:hover {
background: linear-gradient(to right, #9a2229, #7d1820);
}

.auth-footer {
margin-top: 24px;
text-align: center;
color: #6b7280;
font-size: 14px;
}

.auth-link {
color: #7d1820;
cursor: pointer;
text-decoration: none;
}

.auth-link:hover {
color: #9a2229;
text-decoration: underline;
}

/* Dashboard Common Styles */
.dashboard {
height: 100vh;
display: flex;
flex-direction: column;
background: #f5f5f0;
}

.dashboard-header {
background: linear-gradient(to right, #7d1820, #9a2229);
border-bottom: 4px solid #d4af37;
padding: 16px 24px;
display: flex;
align-items: center;
justify-content: space-between;
box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.dashboard-title {
color: white;
font-size: 24px;
font-weight: bold;
}

.dashboard-user {
display: flex;
align-items: center;
gap: 16px;
}

.user-email {
color: white;
font-size: 14px;
}

.btn-logout {
display: flex;
align-items: center;
gap: 8px;
padding: 8px 16px;
background: #d4af37;
color: #7d1820;
border-radius: 8px;
border: none;
cursor: pointer;
box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
font-size: 14px;
transition: all 0.3s;
}

.btn-logout:hover {
background: #b8860b;
}

.dashboard-content {
flex: 1;
display: flex;
overflow: hidden;
}

/* Sidebar */
.sidebar {
width: 256px;
background: white;
border-right: 2px solid #d4af37;
display: flex;
flex-direction: column;
box-shadow: 4px 0 6px -1px rgba(0, 0, 0, 0.1);
}

.sidebar-header {
padding: 16px;
background: linear-gradient(to right, #7d1820, #9a2229);
border-bottom: 2px solid #d4af37;
}

.sidebar-title {
color: white;
font-size: 18px;
font-weight: bold;
}

.sidebar-nav {
flex: 1;
overflow: auto;
padding: 16px;
background: #f5f5f0;
}

.nav-items {
display: flex;
flex-direction: column;
gap: 8px;
}

.nav-btn {
width: 100%;
display: flex;
align-items: center;
gap: 12px;
padding: 12px 16px;
border-radius: 8px;
border: 2px solid #d1d5db;
background: white;
color: #374151;
cursor: pointer;
transition: all 0.3s;
font-size: 14px;
}

.nav-btn:hover {
background: #f3f4f6;
}

.nav-btn.active {
background: linear-gradient(to right, #7d1820, #9a2229);
border-color: #d4af37;
color: white;
box-shadow: 0 4px 6px -1px rgba(125, 24, 32, 0.5);
}

.nav-btn.add-btn {
background: linear-gradient(to right, #7d1820, #9a2229);
border-color: #d4af37;
color: white;
box-shadow: 0 4px 6px -1px rgba(125, 24, 32, 0.5);
}

.nav-btn.add-btn:hover {
background: linear-gradient(to right, #9a2229, #7d1820);
}

/* Main Content */
.main-content {
flex: 1;
overflow: auto;
padding: 24px;
}

.content-header {
margin-bottom: 24px;
}

.content-title {
color: #7d1820;
font-size: 28px;
font-weight: bold;
margin-bottom: 8px;
}

.content-subtitle {
color: #6b7280;
font-size: 14px;
}

.content-grid {
display: grid;
grid-template-columns: 1fr;
gap: 24px;
}

@media (min-width: 1024px) {
.content-grid {
grid-template-columns: 1fr 1fr;
}
}

/* Cards */
.card {
background: white;
border-radius: 8px;
padding: 24px;
border: 2px solid #d4af37;
box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.card-header {
display: flex;
align-items: center;
gap: 8px;
margin-bottom: 16px;
}

.card-title {
color: #7d1820;
font-size: 20px;
font-weight: bold;
}

/* Missing Activities */
.activities-list {
display: flex;
flex-direction: column;
gap: 12px;
max-height: 400px;
overflow-y: auto;
}

.activity-item {
background: #f5f5f0;
border: 2px solid #7d1820;
border-radius: 8px;
padding: 16px;
transition: all 0.3s;
}

.activity-item:hover {
border-color: #d4af37;
}

.activity-header {
display: flex;
justify-content: space-between;
margin-bottom: 8px;
}

.activity-title {
color: #111827;
font-weight: 600;
font-size: 14px;
}

.activity-subject {
color: #6b7280;
font-size: 12px;
}

.activity-badge {
padding: 4px 8px;
background: #7d1820;
color: white;
border-radius: 4px;
font-size: 12px;
white-space: nowrap;
}

.activity-footer {
display: flex;
align-items: center;
gap: 8px;
color: #6b7280;
font-size: 12px;
}

/* Excel-like Spreadsheet */
.spreadsheet-container {
background: white;
border-radius: 8px;
overflow: auto;
height: 100%;
border: 2px solid #e5e7eb;
}

.spreadsheet {
width: 100%;
border-collapse: collapse;
min-width: 800px;
}

.spreadsheet th {
background: #f9fafb;
color: #374151;
padding: 8px 12px;
text-align: center;
font-size: 13px;
border: 1px solid #d1d5db;
position: sticky;
top: 0;
z-index: 10;
font-weight: 600;
}

.spreadsheet th.row-header {
position: sticky;
left: 0;
z-index: 20;
min-width: 48px;
background: #f3f4f6;
}

.spreadsheet td.row-number {
background: #f3f4f6;
color: #6b7280;
text-align: center;
border: 1px solid #d1d5db;
position: sticky;
left: 0;
z-index: 5;
font-weight: 600;
}

.spreadsheet td {
padding: 0;
border: 1px solid #e5e7eb;
background: white;
}

.spreadsheet input {
width: 100%;
min-width: 120px;
height: 32px;
border: none;
background: transparent;
padding: 4px 8px;
font-size: 13px;
color: #111827;
outline: none;
}

.spreadsheet input:focus {
background: #f9fafb;
box-shadow: inset 0 0 0 2px #7d1820;
}

.spreadsheet input[readonly] {
background: #f9fafb;
color: #6b7280;
cursor: not-allowed;
}

.spreadsheet tr:hover td {
background: #fafafa;
}

.spreadsheet tr:hover td.row-number {
background: #f3f4f6;
}

/* Pie Chart */
.chart-container {
width: 100%;
height: 300px;
position: relative;
}

#pieCanvas {
max-width: 100%;
max-height: 100%;
}

.chart-legend {
margin-top: 16px;
display: grid;
grid-template-columns: 1fr 1fr;
gap: 8px;
}

.legend-item {
display: flex;
align-items: center;
gap: 8px;
font-size: 12px;
color: #6b7280;
}

.legend-color {
width: 16px;
height: 16px;
border-radius: 2px;
}

.chart-description {
margin-top: 16px;
text-align: center;
color: #6b7280;
font-size: 13px;
}

/* Stats Cards */
.stats-grid {
display: grid;
grid-template-columns: 1fr;
gap: 16px;
margin-top: 24px;
}

@media (min-width: 768px) {
.stats-grid {
grid-template-columns: repeat(3, 1fr);
}
}

.stat-card {
background: #f5f5f0;
padding: 12px;
border-radius: 8px;
border: 1px solid #d1d5db;
}

.stat-label {
color: #374151;
font-size: 13px;
margin-bottom: 4px;
}

.stat-value {
font-size: 18px;
font-weight: bold;
}

.stat-value.maroon {
color: #7d1820;
}

.stat-value.green {
color: #16a34a;
}

.stat-value.gold {
color: #d4af37;
}

/* Modal/Dialog */
.modal-overlay {
position: fixed;
inset: 0;
background: rgba(0, 0, 0, 0.8);
display: flex;
align-items: center;
justify-content: center;
z-index: 50;
padding: 16px;
}

.modal-content {
background: white;
border-radius: 8px;
box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
width: 100%;
max-width: 448px;
padding: 24px;
border: 2px solid #d4af37;
max-height: 90vh;
overflow-y: auto;
}

.modal-title {
color: #7d1820;
font-size: 20px;
font-weight: bold;
margin-bottom: 16px;
}

.modal-actions {
display: flex;
gap: 12px;
margin-top: 16px;
}

.btn-secondary {
flex: 1;
padding: 8px 16px;
background: white;
color: #374151;
border: 2px solid #d1d5db;
border-radius: 8px;
cursor: pointer;
font-size: 14px;
transition: all 0.3s;
}

.btn-secondary:hover {
background: #f9fafb;
}

.btn-modal-primary {
flex: 1;
padding: 8px 16px;
background: linear-gradient(to right, #7d1820, #9a2229);
color: white;
border: 1px solid #d4af37;
border-radius: 8px;
cursor: pointer;
font-size: 14px;
transition: all 0.3s;
box-shadow: 0 4px 6px -1px rgba(125, 24, 32, 0.5);
}

.btn-modal-primary:hover {
background: linear-gradient(to right, #9a2229, #7d1820);
}

/* Action Buttons Row */
.action-buttons {
display: flex;
gap: 12px;
padding: 16px;
background: white;
border-top: 2px solid #d4af37;
}

.action-btn {
flex: 1;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
padding: 12px 16px;
border-radius: 8px;
border: 1px solid;
cursor: pointer;
font-size: 14px;
transition: all 0.3s;
}

.action-btn.primary {
background: linear-gradient(to right, #7d1820, #9a2229);
border-color: #d4af37;
color: white;
box-shadow: 0 4px 6px -1px rgba(125, 24, 32, 0.5);
}

.action-btn.primary:hover {
background: linear-gradient(to right, #9a2229, #7d1820);
}

.action-btn.secondary {
background: linear-gradient(to right, #d4af37, #b8860b);
border-color: #7d1820;
color: #7d1820;
box-shadow: 0 4px 6px -1px rgba(212, 175, 55, 0.5);
}

.action-btn.secondary:hover {
background: linear-gradient(to right, #b8860b, #d4af37);
}

/* Professor Dashboard Specific */
.professor-layout {
display: flex;
flex: 1;
overflow: hidden;
}

.spreadsheet-section {
flex: 1;
display: flex;
flex-direction: column;
min-width: 0;
}

.section-header {
background: linear-gradient(to right, #7d1820, #9a2229);
border-bottom: 2px solid #d4af37;
padding: 12px 16px;
}

.section-title {
color: white;
font-size: 18px;
font-weight: bold;
}

.right-panel {
width: 384px;
background: #f5f5f0;
border-left: 2px solid #d4af37;
padding: 24px;
overflow: auto;
box-shadow: -4px 0 6px -1px rgba(0, 0, 0, 0.1);
}

.panel-cards {
display: flex;
flex-direction: column;
gap: 16px;
}

.assignments-list {
display: flex;
flex-direction: column;
gap: 8px;
}

.assignment-item {
display: flex;
align-items: center;
gap: 8px;
color: #374151;
font-size: 14px;
}

.assignment-dot {
width: 8px;
height: 8px;
border-radius: 50%;
}

.resources-buttons {
margin-top: 16px;
display: flex;
flex-direction: column;
gap: 8px;
}

.resource-btn {
padding: 8px 16px;
border-radius: 8px;
border: none;
cursor: pointer;
font-size: 14px;
transition: all 0.3s;
}

.resource-btn.primary {
background: linear-gradient(to right, #7d1820, #9a2229);
color: white;
border: 1px solid #d4af37;
box-shadow: 0 4px 6px -1px rgba(125, 24, 32, 0.5);
}

.resource-btn.primary:hover {
background: linear-gradient(to right, #9a2229, #7d1820);
}

.resource-btn.outline {
background: white;
color: #7d1820;
border: 2px solid #7d1820;
}

.resource-btn.outline:hover {
background: #f9fafb;
}

/* Grade Result Display */
.grade-result {
background: linear-gradient(to right, #7d1820, #9a2229);
border-radius: 8px;
padding: 16px;
border: 2px solid #d4af37;
display: flex;
justify-content: space-between;
align-items: center;
margin-top: 16px;
}

.grade-result-label {
color: white;
font-size: 14px;
}

.grade-result-value {
color: #d4af37;
font-size: 28px;
font-weight: bold;
}

/* Responsive */
@media (max-width: 1024px) {
.sidebar {
width: 100%;
max-height: 200px;
border-right: none;
border-bottom: 2px solid #d4af37;
}

.dashboard-content {
flex-direction: column;
}

.right-panel {
width: 100%;
border-left: none;
border-top: 2px solid #d4af37;
}

.professor-layout {
flex-direction: column;
}
}

@media (max-width: 640px) {
.auth-card {
padding: 16px;
}

.auth-logo {
width: 48px;
height: 48px;
}

.auth-title {
font-size: 20px;
}

.dashboard-header {
padding: 12px 16px;
}

.dashboard-title {
font-size: 18px;
}

.user-email {
display: none;
}

.btn-logout span {
display: none;
}

.main-content {
padding: 16px;
}

.content-title {
font-size: 20px;
}

.action-buttons {
flex-direction: column;
}
}

.icon {
width: 20px;
height: 20px;
display: inline-block;
vertical-align: middle;
}

.icon-lg {
width: 32px;
height: 32px;
}
</style>
</head>
<body>
<!-- Login Page -->
<div id="loginPage" class="auth-container">
<div class="auth-card">
<div class="auth-header">
<img src="https://upload.wikimedia.org/wikipedia/en/thumb/c/c7/Polytechnic_University_of_the_Philippines_San_Juan_Logo.svg/1200px-Polytechnic_University_of_the_Philippines_San_Juan_Logo.svg.png" alt="PUP San Juan Logo" class="auth-logo">
<h1 class="auth-title">PUP San Juan</h1>
<p class="auth-subtitle">Welcome Back</p>
</div>

<form id="loginForm">
<div class="form-group">
<label class="form-label">I am a:</label>
<div class="role-selector">
<button type="button" class="role-btn active" data-role="student">
<svg class="icon-lg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z"/>
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/>
</svg>
<span>Student</span>
</button>
<button type="button" class="role-btn" data-role="professor">
<svg class="icon-lg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
</svg>
<span>Professor</span>
</button>
</div>
</div>

<div class="input-group">
<svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
</svg>
<input type="email" class="form-input" placeholder="you@example.com" id="loginEmail" required>
</div>

<div class="input-group">
<svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
</svg>
<input type="password" class="form-input" placeholder="••••••••" id="loginPassword" required>
</div>

<button type="submit" class="btn-primary">Sign In</button>
</form>

<div class="auth-footer">
<p>Don't have an account? <a class="auth-link" id="switchToSignup">Sign up</a></p>
</div>
</div>
</div>

<!-- Signup Page -->
<div id="signupPage" class="auth-container hidden">
<div class="auth-card">
<div class="auth-header">
<img src="https://upload.wikimedia.org/wikipedia/en/thumb/c/c7/Polytechnic_University_of_the_Philippines_San_Juan_Logo.svg/1200px-Polytechnic_University_of_the_Philippines_San_Juan_Logo.svg.png" alt="PUP San Juan Logo" class="auth-logo">
<h1 class="auth-title">Create Account</h1>
<p class="auth-subtitle">Sign up to get started</p>
</div>

<form id="signupForm">
<div class="form-group">
<label class="form-label">I am a:</label>
<div class="role-selector">
<button type="button" class="role-btn active" data-role="student">
<svg class="icon-lg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z"/>
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/>
</svg>
<span>Student</span>
</button>
<button type="button" class="role-btn" data-role="professor">
<svg class="icon-lg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
</svg>
<span>Professor</span>
</button>
</div>
</div>

<div class="input-group">
<svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
</svg>
<input type="text" class="form-input" placeholder="John Doe" id="signupName" required>
</div>

<div class="input-group">
<svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
</svg>
<input type="email" class="form-input" placeholder="you@example.com" id="signupEmail" required>
</div>

<div class="input-group">
<svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
</svg>
<input type="password" class="form-input" placeholder="••••••••" id="signupPassword" required>
</div>

<div class="input-group">
<svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
</svg>
<input type="password" class="form-input" placeholder="••••••••" id="signupConfirmPassword" required>
</div>

<button type="submit" class="btn-primary">Create Account</button>
</form>

<div class="auth-footer">
<p>Already have an account? <a class="auth-link" id="switchToLogin">Sign in</a></p>
</div>
</div>
</div>

<!-- Student Dashboard -->
<div id="studentDashboard" class="dashboard hidden">
<header class="dashboard-header">
<h1 class="dashboard-title">Student Dashboard</h1>
<div class="dashboard-user">
<span class="user-email" id="studentEmail">student@pup.edu.ph</span>
<button class="btn-logout" id="studentLogout">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
</svg>
<span>Logout</span>
</button>
</div>
</header>

<div class="dashboard-content">
<aside class="sidebar">
<div class="sidebar-header">
<h2 class="sidebar-title">My Subjects</h2>
</div>
<nav class="sidebar-nav">
<div class="nav-items" id="studentSubjects">
<button class="nav-btn add-btn" id="enrollSubjectBtn">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
</svg>
<span>Enroll Subject</span>
</button>
<button class="nav-btn active" data-subject="All Subjects">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
</svg>
<span>All Subjects</span>
</button>
<button class="nav-btn" data-subject="Mathematics">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
</svg>
<span>Mathematics</span>
</button>
<button class="nav-btn" data-subject="Science">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
</svg>
<span>Science</span>
</button>
<button class="nav-btn" data-subject="Statistics">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
</svg>
<span>Statistics</span>
</button>
</div>
</nav>
</aside>

<main class="main-content">
<div class="content-header">
<h2 class="content-title" id="studentActiveSubject">All Subjects</h2>
<p class="content-subtitle">Track your progress and missing activities</p>
</div>

<div class="content-grid">
<div class="card">
<div class="card-header">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
</svg>
<h3 class="card-title">Missing Activities</h3>
</div>
<div class="activities-list" id="studentActivities">
<div class="activity-item">
<div class="activity-header">
<div>
<div class="activity-title">Chapter 5 Homework</div>
<div class="activity-subject">Mathematics</div>
</div>
<span class="activity-badge">Assignment</span>
</div>
<div class="activity-footer">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
</svg>
<span>Due: 2025-11-28</span>
</div>
</div>
<div class="activity-item">
<div class="activity-header">
<div>
<div class="activity-title">Lab Report #3</div>
<div class="activity-subject">Science</div>
</div>
<span class="activity-badge">Lab</span>
</div>
<div class="activity-footer">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
</svg>
<span>Due: 2025-11-29</span>
</div>
</div>
<div class="activity-item">
<div class="activity-header">
<div>
<div class="activity-title">Quiz 4</div>
<div class="activity-subject">Mathematics</div>
</div>
<span class="activity-badge">Quiz</span>
</div>
<div class="activity-footer">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
</svg>
<span>Due: 2025-11-30</span>
</div>
</div>
<div class="activity-item">
<div class="activity-header">
<div>
<div class="activity-title">Data Analysis Project</div>
<div class="activity-subject">Statistics</div>
</div>
<span class="activity-badge">Project</span>
</div>
<div class="activity-footer">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
</svg>
<span>Due: 2025-12-01</span>
</div>
</div>
<div class="activity-item">
<div class="activity-header">
<div>
<div class="activity-title">Reading Assignment</div>
<div class="activity-subject">Science</div>
</div>
<span class="activity-badge">Reading</span>
</div>
<div class="activity-footer">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
</svg>
<span>Due: 2025-11-27</span>
</div>
</div>
</div>
</div>

<div class="card">
<h3 class="card-title">Predictive Analysis</h3>
<div class="chart-container">
<canvas id="studentPieChart"></canvas>
</div>
<div class="chart-legend">
<div class="legend-item">
<div class="legend-color" style="background: #ef4444;"></div>
<span>High Pass Probability: 35%</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background: #dc2626;"></div>
<span>Moderate Pass Probability: 30%</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background: #991b1b;"></div>
<span>Low Pass Probability: 20%</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background: #7f1d1d;"></div>
<span>At Risk: 15%</span>
</div>
</div>
<div class="chart-description">
Probability prediction based on current performance trends
</div>
<div class="stats-grid">
<div class="stat-card">
<div class="stat-label">Pass Probability</div>
<div class="stat-value maroon">85%</div>
</div>
<div class="stat-card">
<div class="stat-label">Success Prediction</div>
<div class="stat-value green">High</div>
</div>
<div class="stat-card">
<div class="stat-label">Completion Rate</div>
<div class="stat-value gold">78%</div>
</div>
</div>
</div>
</div>

<div class="stats-grid" style="margin-top: 24px;">
<div class="card">
<h4 class="card-title" style="font-size: 16px; margin-bottom: 8px;">Upcoming Deadlines</h4>
<p style="color: #374151; font-size: 14px;">3 assignments due this week</p>
</div>
<div class="card">
<h4 class="card-title" style="font-size: 16px; margin-bottom: 8px;">Study Time</h4>
<p style="color: #374151; font-size: 14px;">12 hours this week</p>
</div>
<div class="card">
<h4 class="card-title" style="font-size: 16px; margin-bottom: 8px;">Active Subjects</h4>
<p style="color: #374151; font-size: 14px;">3 enrolled</p>
</div>
</div>
</main>
</div>
</div>

<!-- Professor Dashboard -->
<div id="professorDashboard" class="dashboard hidden">
<header class="dashboard-header">
<h1 class="dashboard-title">Professor Dashboard</h1>
<div class="dashboard-user">
<span class="user-email" id="professorEmail">professor@pup.edu.ph</span>
<button class="btn-logout" id="professorLogout">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
</svg>
<span>Logout</span>
</button>
</div>
</header>

<div class="dashboard-content">
<aside class="sidebar">
<div class="sidebar-header">
<h2 class="sidebar-title">Subjects</h2>
</div>
<nav class="sidebar-nav">
<div class="nav-items" id="professorSubjects">
<button class="nav-btn add-btn" id="addSubjectBtn">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
</svg>
<span>Add Subject</span>
</button>
<button class="nav-btn active" data-subject="Mathematics">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
</svg>
<span>Mathematics</span>
</button>
<button class="nav-btn" data-subject="Science">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
</svg>
<span>Science</span>
</button>
<button class="nav-btn" data-subject="Statistics">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
</svg>
<span>Statistics</span>
</button>
</div>
</nav>
</aside>

<div class="professor-layout">
<div class="spreadsheet-section">
<div class="section-header">
<h2 class="section-title" id="professorActiveSubject">Data Sheet - Mathematics</h2>
</div>
<div class="spreadsheet-container" style="flex: 1; overflow: auto;">
<table class="spreadsheet" id="professorSpreadsheet">
<thead>
<tr>
<th class="row-header">#</th>
<th>ID Number</th>
<th>Name</th>
<th>Quiz</th>
<th>Activity</th>
<th>Exam</th>
<th>Midterm</th>
<th>Final</th>
<th>Final Grade</th>
</tr>
</thead>
<tbody id="spreadsheetBody">
<!-- Rows will be generated by JavaScript -->
</tbody>
</table>
</div>
<div class="action-buttons">
<button class="action-btn primary" id="computeGradeBtn">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
</svg>
<span>Compute Final Grade</span>
</button>
<button class="action-btn secondary" id="refreshAnalysisBtn">
<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
</svg>
<span>Refresh Analysis</span>
</button>
</div>
</div>

<aside class="right-panel">
<div class="content-header">
<h2 class="content-title" id="professorSubjectName">Mathematics</h2>
<p class="content-subtitle">Subject overview and analysis</p>
</div>

<div class="panel-cards">
<div class="card">
<h3 class="card-title">Predictive Analysis</h3>
<div class="chart-container">
<canvas id="professorPieChart"></canvas>
</div>
<div class="chart-legend" id="professorLegend">
<div class="legend-item">
<div class="legend-color" style="background: #ef4444;"></div>
<span>High Pass Probability: 35%</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background: #dc2626;"></div>
<span>Moderate Pass Probability: 30%</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background: #991b1b;"></div>
<span>Low Pass Probability: 20%</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background: #7f1d1d;"></div>
<span>At Risk: 15%</span>
</div>
</div>
<div class="chart-description">
Probability prediction based on current performance trends
</div>
</div>

<div class="card">
<h3 class="card-title" style="font-size: 16px; margin-bottom: 12px;">Assignments</h3>
<div class="assignments-list">
<div class="assignment-item">
<div class="assignment-dot" style="background: #10b981;"></div>
<span>Chapter 5 Exercises</span>
</div>
<div class="assignment-item">
<div class="assignment-dot" style="background: #d4af37;"></div>
<span>Final Project</span>
</div>
<div class="assignment-item">
<div class="assignment-dot" style="background: #7d1820;"></div>
<span>Quiz Preparation</span>
</div>
</div>
</div>

<div class="card">
<h3 class="card-title" style="font-size: 16px; margin-bottom: 8px;">Resources</h3>
<p style="color: #6b7280; font-size: 14px; margin-bottom: 16px;">Access study materials and notes</p>
<div class="resources-buttons">
<button class="resource-btn primary">View Materials</button>
<button class="resource-btn outline">Download Notes</button>
</div>
</div>
</div>
</aside>
</div>
</div>
</div>

<!-- Modals -->
<!-- Enroll Subject Modal -->
<div id="enrollSubjectModal" class="modal-overlay hidden">
<div class="modal-content">
<h2 class="modal-title">Enroll in Subject</h2>
<input type="text" class="form-input" placeholder="Enter subject name" id="enrollSubjectInput" style="padding-left: 12px;">
<div class="modal-actions">
<button class="btn-modal-primary" id="confirmEnroll">Enroll</button>
<button class="btn-secondary" id="cancelEnroll">Cancel</button>
</div>
</div>
</div>

<!-- Add Subject Modal -->
<div id="addSubjectModal" class="modal-overlay hidden">
<div class="modal-content">
<h2 class="modal-title">Add New Subject</h2>
<input type="text" class="form-input" placeholder="Enter subject name" id="addSubjectInput" style="padding-left: 12px;">
<div class="modal-actions">
<button class="btn-modal-primary" id="confirmAdd">Add</button>
<button class="btn-secondary" id="cancelAdd">Cancel</button>
</div>
</div>
</div>

<!-- Compute Grade Modal -->
<div id="computeGradeModal" class="modal-overlay hidden">
<div class="modal-content">
<h2 class="modal-title">Compute Final Grade</h2>
<div class="form-group">
<label class="form-label">Student:</label>
<select class="form-input" id="studentSelect" style="padding-left: 12px;">
<option value="">Select a student</option>
<option value="John Doe">John Doe</option>
<option value="Jane Smith">Jane Smith</option>
<option value="Michael Johnson">Michael Johnson</option>
<option value="Emily Davis">Emily Davis</option>
<option value="Robert Brown">Robert Brown</option>
</select>
</div>
<div class="form-group">
<label class="form-label">Quizzes (20%):</label>
<input type="number" class="form-input" placeholder="Enter quiz grade" id="quizzesInput" style="padding-left: 12px;">
</div>
<div class="form-group">
<label class="form-label">Assignments (20%):</label>
<input type="number" class="form-input" placeholder="Enter assignment grade" id="assignmentsInput" style="padding-left: 12px;">
</div>
<div class="form-group">
<label class="form-label">Midterm (30%):</label>
<input type="number" class="form-input" placeholder="Enter midterm grade" id="midtermInput" style="padding-left: 12px;">
</div>
<div class="form-group">
<label class="form-label">Finals (30%):</label>
<input type="number" class="form-input" placeholder="Enter finals grade" id="finalsInput" style="padding-left: 12px;">
</div>
<div id="gradeResult" class="hidden">
<div class="grade-result">
<span class="grade-result-label">Final Grade:</span>
<span class="grade-result-value" id="finalGradeValue">0</span>
</div>
</div>
<div class="modal-actions">
<button class="btn-modal-primary" id="computeBtn">Compute</button>
<button class="btn-secondary" id="cancelCompute">Cancel</button>
</div>
</div>
</div>

<script>
// State management
let currentUser = {
email: '',
role: ''
};
let loginRole = 'student';
let signupRole = 'student';
let studentActiveSubject = 'All Subjects';
let professorActiveSubject = 'Mathematics';
let professorChartData = [
{ name: 'High Pass Probability', value: 35, color: '#ef4444' },
{ name: 'Moderate Pass Probability', value: 30, color: '#dc2626' },
{ name: 'Low Pass Probability', value: 20, color: '#991b1b' },
{ name: 'At Risk', value: 15, color: '#7f1d1d' }
];

// Sample student data
const sampleStudents = [
{ id: '2021-00001-MN-0', name: 'John Doe', quiz: '85', activity: '90', exam: '88', midterm: '87', final: '89' },
{ id: '2021-00002-MN-0', name: 'Jane Smith', quiz: '92', activity: '88', exam: '91', midterm: '90', final: '93' },
{ id: '2021-00003-MN-0', name: 'Michael Johnson', quiz: '78', activity: '82', exam: '80', midterm: '79', final: '81' },
{ id: '2021-00004-MN-0', name: 'Emily Davis', quiz: '95', activity: '94', exam: '96', midterm: '95', final: '97' },
{ id: '2021-00005-MN-0', name: 'Robert Brown', quiz: '88', activity: '86', exam: '87', midterm: '88', final: '90' },
{ id: '2021-00006-MN-0', name: 'Maria Garcia', quiz: '91', activity: '89', exam: '90', midterm: '92', final: '91' },
{ id: '2021-00007-MN-0', name: 'David Wilson', quiz: '76', activity: '78', exam: '75', midterm: '77', final: '79' },
{ id: '2021-00008-MN-0', name: 'Sarah Martinez', quiz: '89', activity: '91', exam: '88', midterm: '90', final: '92' },
{ id: '2021-00009-MN-0', name: 'James Anderson', quiz: '84', activity: '83', exam: '85', midterm: '86', final: '87' },
{ id: '2021-00010-MN-0', name: 'Lisa Taylor', quiz: '93', activity: '95', exam: '94', midterm: '93', final: '96' }
];

// Calculate average for a row
function calculateAverage(quiz, activity, exam, midterm, final) {
const nums = [quiz, activity, exam, midterm, final]
.map(v => parseFloat(v))
.filter(v => !isNaN(v));

if (nums.length === 0) return '';

const avg = nums.reduce((sum, n) => sum + n, 0) / nums.length;
return avg.toFixed(2);
}

// Initialize Spreadsheet
function initSpreadsheet() {
const tbody = document.getElementById('spreadsheetBody');
tbody.innerHTML = '';

for (let i = 0; i < 20; i++) {
const row = document.createElement('tr');

// Row number
const rowNumCell = document.createElement('td');
rowNumCell.className = 'row-number';
rowNumCell.textContent = i + 1;
row.appendChild(rowNumCell);

// Get student data if available
const student = i < sampleStudents.length ? sampleStudents[i] : null;

// Data cells (8 columns: ID, Name, Quiz, Activity, Exam, Midterm, Final, Final Grade)
const values = student ? [
student.id,
student.name,
student.quiz,
student.activity,
student.exam,
student.midterm,
student.final,
calculateAverage(student.quiz, student.activity, student.exam, student.midterm, student.final)
] : ['', '', '', '', '', '', '', ''];

for (let j = 0; j < 8; j++) {
const cell = document.createElement('td');
const input = document.createElement('input');
input.type = 'text';
input.value = values[j];

// Make Final Grade column readonly and add listeners to grade columns
if (j === 7) {
input.readOnly = true;
input.className = 'final-grade-cell';
} else if (j >= 2 && j <= 6) {
// Add input listener to grade columns (Quiz, Activity, Exam, Midterm, Final)
input.addEventListener('input', function() {
updateRowAverage(row);
});
}

cell.appendChild(input);
row.appendChild(cell);
}

tbody.appendChild(row);
}
}

// Update average for a specific row
function updateRowAverage(row) {
const inputs = row.querySelectorAll('input');
// inputs[2-6] are Quiz, Activity, Exam, Midterm, Final
// inputs[7] is Final Grade
const quiz = inputs[2].value;
const activity = inputs[3].value;
const exam = inputs[4].value;
const midterm = inputs[5].value;
const final = inputs[6].value;

const average = calculateAverage(quiz, activity, exam, midterm, final);
inputs[7].value = average;
}

// Draw Pie Chart
function drawPieChart(canvasId, data) {
const canvas = document.getElementById(canvasId);
if (!canvas) return;

const ctx = canvas.getContext('2d');
const centerX = canvas.width / 2;
const centerY = canvas.height / 2;
const radius = Math.min(centerX, centerY) - 20;

// Clear canvas
ctx.clearRect(0, 0, canvas.width, canvas.height);

// Calculate total
const total = data.reduce((sum, item) => sum + item.value, 0);

let currentAngle = -Math.PI / 2; // Start from top

data.forEach((item, index) => {
const sliceAngle = (item.value / total) * 2 * Math.PI;

// Draw slice
ctx.beginPath();
ctx.moveTo(centerX, centerY);
ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
ctx.closePath();
ctx.fillStyle = item.color;
ctx.fill();

// Draw label
const labelAngle = currentAngle + sliceAngle / 2;
const labelX = centerX + (radius * 0.7) * Math.cos(labelAngle);
const labelY = centerY + (radius * 0.7) * Math.sin(labelAngle);

ctx.fillStyle = '#ffffff';
ctx.font = 'bold 12px Arial';
ctx.textAlign = 'center';
ctx.textBaseline = 'middle';
const percentage = Math.round((item.value / total) * 100);
ctx.fillText(`${percentage}%`, labelX, labelY);

currentAngle += sliceAngle;
});
}

// Initialize pie charts
function initCharts() {
// Set canvas sizes
const studentCanvas = document.getElementById('studentPieChart');
const professorCanvas = document.getElementById('professorPieChart');

if (studentCanvas) {
studentCanvas.width = 300;
studentCanvas.height = 300;
drawPieChart('studentPieChart', professorChartData);
}

if (professorCanvas) {
professorCanvas.width = 300;
professorCanvas.height = 300;
drawPieChart('professorPieChart', professorChartData);
}
}

// Page Navigation
function showPage(pageId) {
const pages = ['loginPage', 'signupPage', 'studentDashboard', 'professorDashboard'];
pages.forEach(id => {
document.getElementById(id).classList.add('hidden');
});
document.getElementById(pageId).classList.remove('hidden');

// Initialize charts when showing dashboards
if (pageId === 'studentDashboard' || pageId === 'professorDashboard') {
setTimeout(() => {
initCharts();
if (pageId === 'professorDashboard') {
initSpreadsheet();
}
}, 100);
}
}

// Role Selection for Login
document.querySelectorAll('#loginPage .role-btn').forEach(btn => {
btn.addEventListener('click', () => {
document.querySelectorAll('#loginPage .role-btn').forEach(b => b.classList.remove('active'));
btn.classList.add('active');
loginRole = btn.dataset.role;
});
});

// Role Selection for Signup
document.querySelectorAll('#signupPage .role-btn').forEach(btn => {
btn.addEventListener('click', () => {
document.querySelectorAll('#signupPage .role-btn').forEach(b => b.classList.remove('active'));
btn.classList.add('active');
signupRole = btn.dataset.role;
});
});

// Switch to Signup
document.getElementById('switchToSignup').addEventListener('click', () => {
showPage('signupPage');
});

// Switch to Login
document.getElementById('switchToLogin').addEventListener('click', () => {
showPage('loginPage');
});

// Login Form
document.getElementById('loginForm').addEventListener('submit', (e) => {
e.preventDefault();
const email = document.getElementById('loginEmail').value;
currentUser.email = email;
currentUser.role = loginRole;

if (loginRole === 'student') {
document.getElementById('studentEmail').textContent = email;
showPage('studentDashboard');
} else {
document.getElementById('professorEmail').textContent = email;
showPage('professorDashboard');
}
});

// Signup Form
document.getElementById('signupForm').addEventListener('submit', (e) => {
e.preventDefault();
const email = document.getElementById('signupEmail').value;
const password = document.getElementById('signupPassword').value;
const confirmPassword = document.getElementById('signupConfirmPassword').value;

if (password !== confirmPassword) {
alert('Passwords do not match!');
return;
}

currentUser.email = email;
currentUser.role = signupRole;

if (signupRole === 'student') {
document.getElementById('studentEmail').textContent = email;
showPage('studentDashboard');
} else {
document.getElementById('professorEmail').textContent = email;
showPage('professorDashboard');
}
});

// Logout handlers
document.getElementById('studentLogout').addEventListener('click', () => {
currentUser = { email: '', role: '' };
showPage('loginPage');
});

document.getElementById('professorLogout').addEventListener('click', () => {
currentUser = { email: '', role: '' };
showPage('loginPage');
});

// Student Subject Navigation
document.querySelectorAll('#studentSubjects .nav-btn:not(.add-btn)').forEach(btn => {
btn.addEventListener('click', () => {
document.querySelectorAll('#studentSubjects .nav-btn:not(.add-btn)').forEach(b => b.classList.remove('active'));
btn.classList.add('active');
studentActiveSubject = btn.dataset.subject;
document.getElementById('studentActiveSubject').textContent = studentActiveSubject;
});
});

// Professor Subject Navigation
document.querySelectorAll('#professorSubjects .nav-btn:not(.add-btn)').forEach(btn => {
btn.addEventListener('click', () => {
document.querySelectorAll('#professorSubjects .nav-btn:not(.add-btn)').forEach(b => b.classList.remove('active'));
btn.classList.add('active');
professorActiveSubject = btn.dataset.subject;
document.getElementById('professorActiveSubject').textContent = 'Data Sheet - ' + professorActiveSubject;
document.getElementById('professorSubjectName').textContent = professorActiveSubject;
});
});

// Enroll Subject Modal
document.getElementById('enrollSubjectBtn').addEventListener('click', () => {
document.getElementById('enrollSubjectModal').classList.remove('hidden');
});

document.getElementById('cancelEnroll').addEventListener('click', () => {
document.getElementById('enrollSubjectModal').classList.add('hidden');
document.getElementById('enrollSubjectInput').value = '';
});

document.getElementById('confirmEnroll').addEventListener('click', () => {
const subjectName = document.getElementById('enrollSubjectInput').value.trim();
if (subjectName) {
alert('Enrolled in: ' + subjectName);
document.getElementById('enrollSubjectModal').classList.add('hidden');
document.getElementById('enrollSubjectInput').value = '';
}
});

// Add Subject Modal
document.getElementById('addSubjectBtn').addEventListener('click', () => {
document.getElementById('addSubjectModal').classList.remove('hidden');
});

document.getElementById('cancelAdd').addEventListener('click', () => {
document.getElementById('addSubjectModal').classList.add('hidden');
document.getElementById('addSubjectInput').value = '';
});

document.getElementById('confirmAdd').addEventListener('click', () => {
const subjectName = document.getElementById('addSubjectInput').value.trim();
if (subjectName) {
alert('Added subject: ' + subjectName);
document.getElementById('addSubjectModal').classList.add('hidden');
document.getElementById('addSubjectInput').value = '';
}
});

// Compute Grade Modal
document.getElementById('computeGradeBtn').addEventListener('click', () => {
document.getElementById('computeGradeModal').classList.remove('hidden');
});

document.getElementById('cancelCompute').addEventListener('click', () => {
document.getElementById('computeGradeModal').classList.add('hidden');
document.getElementById('gradeResult').classList.add('hidden');
document.getElementById('studentSelect').value = '';
document.getElementById('quizzesInput').value = '';
document.getElementById('assignmentsInput').value = '';
document.getElementById('midtermInput').value = '';
document.getElementById('finalsInput').value = '';
});

document.getElementById('computeBtn').addEventListener('click', () => {
const quizzes = parseFloat(document.getElementById('quizzesInput').value) || 0;
const assignments = parseFloat(document.getElementById('assignmentsInput').value) || 0;
const midterm = parseFloat(document.getElementById('midtermInput').value) || 0;
const finals = parseFloat(document.getElementById('finalsInput').value) || 0;

const finalGrade = (quizzes * 0.2) + (assignments * 0.2) + (midterm * 0.3) + (finals * 0.3);
const roundedGrade = Math.round(finalGrade * 100) / 100;

document.getElementById('finalGradeValue').textContent = roundedGrade;
document.getElementById('gradeResult').classList.remove('hidden');
});

// Refresh Predictive Analysis
document.getElementById('refreshAnalysisBtn').addEventListener('click', () => {
const total = 100;
const highPass = Math.floor(Math.random() * 40) + 20;
const moderatePass = Math.floor(Math.random() * 30) + 15;
const lowPass = Math.floor(Math.random() * 25) + 10;
const atRisk = total - highPass - moderatePass - lowPass;

professorChartData = [
{ name: 'High Pass Probability', value: highPass, color: '#ef4444' },
{ name: 'Moderate Pass Probability', value: moderatePass, color: '#dc2626' },
{ name: 'Low Pass Probability', value: lowPass, color: '#991b1b' },
{ name: 'At Risk', value: Math.max(atRisk, 5), color: '#7f1d1d' }
];

drawPieChart('professorPieChart', professorChartData);

// Update legend
const legendHTML = professorChartData.map(item => `
<div class="legend-item">
<div class="legend-color" style="background: ${item.color};"></div>
<span>${item.name}: ${item.value}%</span>
</div>
`).join('');
document.getElementById('professorLegend').innerHTML = legendHTML;

alert('Probability prediction refreshed with new data!');
});

// Initialize on page load
window.addEventListener('load', () => {
showPage('loginPage');
});
</script>
</body>
</html>
